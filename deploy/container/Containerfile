FROM alpine:latest

# Arguments
ARG APP_LOCATION=/app

# Install packages
RUN apk --no-cache add \
  bash \
  curl \
  gnupg \
  adduser

# ADd user
RUN adduser -D -u 1000 backup-to-cloud

# Create the /app directory
RUN mkdir $APP_LOCATION

# Set the working directory to $APP_LOCATION
WORKDIR $APP_LOCATION

# Copy the contents to the current working directory
COPY /src .

# Set ownership
RUN chown -R 1000:2000 $APP_LOCATION

USER backup-to-cloud

CMD ["/bin/bash"]
